---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import PostBody from '../../components/PostBody.astro';
import PostHeader from '../../components/PostHeader.astro'
import LastPost from '../../components/LastPost.astro'
import Container from '../../components/Container.astro';


export async function getStaticPaths() {
  const blogEntries = await getCollection('columna');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}
// 2. For your template, you can get the entry directly from the prop
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout article title={entry.data.title} img={entry.data.picture} description={'Edición N°' + entry.data.edition + ' de La Columna del Pueblo.'} keywords={entry.data.tags? entry.data.tags : ""}>
<article itemscope itemtype="https://schema.org/NewsArticle">
  <div class="w-full h-32 flex items-center">
    <img src="../../../img/columna/logo-negro.webp" class="mx-auto drop-shadow-lg h-auto md:h-12 lg:h-16 px-4 lg:p-0 ">
  </div>
    <PostHeader header={entry.data.title} subheader={'Edición N°' + entry.data.edition} bgURL={entry.data.picture} date={entry.data.date} collection={entry.collection} slug={entry.slug} tags={entry.data.tags? entry.data.tags : ""}>
    </PostHeader>
    
    <PostBody title={entry.data.title}>
        <Content />
    </PostBody>
    <section itemscope itemtype="https://schema.org/Comment">
    <Container title='Comentarios'>
      <div id="fb-root"></div>
      <script async defer crossorigin="anonymous" src="https://connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v19.0&appId=771812687817011" nonce="ESeSDpG3"></script>
      <div class="fb-comments" data-href=`https://congresodelpueblo.uy/columna/${entry.slug}/` data-width="100%" data-numposts="5" data-lazy="true"></div>  
    </Container>
  </section>
    <Container title="Últimas columnas">
      <LastPost entries={entry.collection} count={3}></LastPost>
    </Container>
</article>
</Layout>
